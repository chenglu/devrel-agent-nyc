{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/devrel-agent-nyc/lib/services.ts"],"sourcesContent":["// Service adapters for external APIs\n\nimport Anthropic from '@anthropic-ai/sdk'\nimport type { RepoProfile, ContentVariant, ContentFormat } from './types'\n\n// Anthropic Claude Service\nexport class ClaudeService {\n  private client: Anthropic\n  \n  constructor() {\n    const apiKey = process.env.ANTHROPIC_API_KEY\n    if (!apiKey) {\n      throw new Error('ANTHROPIC_API_KEY not configured')\n    }\n    this.client = new Anthropic({ apiKey })\n  }\n\n  async extractRepoProfile(repoData: any): Promise<RepoProfile> {\n    const prompt = `Analyze this GitHub repository and extract a structured profile:\n\nRepository: ${repoData.full_name}\nDescription: ${repoData.description}\nLanguages: ${JSON.stringify(repoData.languages)}\nREADME: ${repoData.readme}\n\nExtract:\n1. Main features (3-5 key capabilities)\n2. Technical stack (frameworks, tools, dependencies)\n3. Primary use cases\n4. Key directories and their purposes\n5. Quickstart path if available\n\nReturn as JSON with this structure:\n{\n  \"mainFeatures\": string[],\n  \"technicalStack\": string[],\n  \"useCases\": string[],\n  \"keyDirectories\": string[],\n  \"quickstartPath\": string | null\n}`\n\n    try {\n      const response = await this.client.messages.create({\n        model: 'claude-sonnet-4-20250514',\n        max_tokens: 2048,\n        messages: [{\n          role: 'user',\n          content: prompt\n        }]\n      })\n\n      const content = response.content[0]\n      if (content.type !== 'text') {\n        throw new Error('Unexpected response format')\n      }\n\n      return JSON.parse(content.text)\n    } catch (error: any) {\n      console.error('Claude API error:', error.message)\n      // Fallback to basic extraction\n      return this.extractProfileFallback(repoData)\n    }\n  }\n\n  private extractProfileFallback(repoData: any): any {\n    // Simple extraction without AI when API fails\n    return {\n      mainFeatures: [\n        repoData.description || 'No description available',\n        'See README for details'\n      ],\n      technicalStack: Object.keys(repoData.languages || {}).slice(0, 5),\n      useCases: ['General development'],\n      keyDirectories: repoData.structure?.keyDirectories || [],\n      quickstartPath: null\n    }\n  }\n\n  async generateContentVariants(\n    profile: RepoProfile,\n    format: ContentFormat,\n    variantCount: number = 2\n  ): Promise<ContentVariant[]> {\n    const prompts = this.getPromptForFormat(format, profile)\n    const variants: ContentVariant[] = []\n\n    try {\n      for (let i = 0; i < variantCount; i++) {\n        const response = await this.client.messages.create({\n          model: 'claude-sonnet-4-20250514',\n          max_tokens: 4096,\n          temperature: 0.7 + (i * 0.1),\n          messages: [{\n            role: 'user',\n            content: prompts\n          }]\n        })\n\n        const content = response.content[0]\n        if (content.type === 'text') {\n          variants.push({\n            id: `${format}-variant-${i + 1}`,\n            format,\n            content: content.text\n          })\n        }\n      }\n    } catch (error: any) {\n      console.error('Claude generation error:', error.message)\n      // Return fallback content\n      variants.push({\n        id: `${format}-variant-1`,\n        format,\n        content: this.generateFallbackContent(format, profile)\n      })\n    }\n\n    return variants\n  }\n\n  private generateFallbackContent(format: ContentFormat, profile: RepoProfile): string {\n    const repoName = profile.name\n    const description = profile.description\n    \n    switch (format) {\n      case 'tutorial':\n        return `# Getting Started with ${repoName}\n\n## Overview\n${description}\n\n## Prerequisites\n- Git installed\n- Basic knowledge of ${profile.primaryLanguage}\n\n## Installation\n\\`\\`\\`bash\ngit clone ${profile.url}\ncd ${repoName}\n# Follow project-specific setup instructions\n\\`\\`\\`\n\n## Next Steps\nCheck the README for detailed documentation.\n\n*Note: This is a fallback tutorial. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'blog':\n        return `# Introducing ${repoName}\n\n${description}\n\n## Key Features\n${profile.mainFeatures.map(f => `- ${f}`).join('\\n')}\n\n## Tech Stack\nBuilt with ${profile.technicalStack.join(', ')}\n\n## Get Started\nVisit the repository: ${profile.url}\n\n*Note: This is a fallback blog post. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'talk':\n        return `# ${repoName}: Conference Talk Outline\n\n## Title\n\"Introduction to ${repoName}\"\n\n## Abstract\n${description}\n\n## Slides (30-45 minutes)\n1. Introduction & Background\n2. Problem Statement\n3. Solution Overview\n4. Key Features\n5. Live Demo\n6. Q&A\n\n*Note: This is a fallback talk outline. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'twitter':\n        return `ðŸš€ Check out ${repoName}!\n\n${description}\n\nBuilt with ${profile.primaryLanguage}\nâ­ ${profile.stars} stars\n\nLearn more: ${profile.url}\n\n#OpenSource #${profile.primaryLanguage}\n\n*Note: This is a fallback tweet. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'linkedin':\n        return `I'm excited to share ${repoName} with the community.\n\n${description}\n\nKey highlights:\n${profile.mainFeatures.map(f => `â€¢ ${f}`).join('\\n')}\n\nCheck it out: ${profile.url}\n\n*Note: This is a fallback LinkedIn post. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'hackathon':\n        return `# Hackathon Challenge: Build with ${repoName}\n\n## Challenge Description\nCreate an innovative project using ${repoName}\n\n## Requirements\n- Use ${profile.primaryLanguage}\n- Implement at least one key feature\n- Document your approach\n\n## Judging Criteria\n- Innovation\n- Technical implementation\n- Code quality\n- Presentation\n\n*Note: This is a fallback challenge. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      default:\n        return `Content for ${format} format.\\n\\n*Note: Add ANTHROPIC_API_KEY for AI-generated content.*`\n    }\n  }\n  private getPromptForFormat(format: ContentFormat, profile: RepoProfile): string {\n    const commitsList = Array.isArray((profile as any).commits) ? (profile as any).commits.slice(0, 5) : []\n    const recentCommits = commitsList.length\n      ? `\\nRecent Commits (most recent first):\\n${commitsList.map((c: any) => `- ${new Date(c.date).toISOString().slice(0,10)}: ${String(c.message || '').split('\\n')[0]}`).join('\\n')}`\n      : ''\n    const baseContext = `Repository: ${profile.name}\nDescription: ${profile.description}\nMain Features: ${profile.mainFeatures.join(', ')}\nTech Stack: ${profile.technicalStack.join(', ')}\nPrimary Language: ${profile.primaryLanguage}${recentCommits}\\nNote: Focus content on changes within the selected analysis period when relevant.`\n\n    switch (format) {\n      case 'tutorial':\n        return `${baseContext}\n\nCreate a step-by-step getting started tutorial for developers new to this project.\nInclude:\n- Prerequisites\n- Installation steps\n- First example with working code\n- Common troubleshooting tips\n- Next steps\n\nMake it executable and accurate. Use markdown format.`\n\n      case 'blog':\n        return `${baseContext}\n\nWrite a technical blog post announcing or explaining this project.\nInclude:\n- Hook: Why this project matters\n- Technical overview\n- Key features with code examples\n- Use cases\n- Getting started link\n- Call to action\n\nTarget audience: Technical developers. Use markdown format.`\n\n      case 'talk':\n        return `${baseContext}\n\nCreate a 30-45 minute conference talk outline about this project.\nInclude:\n- Talk title\n- Abstract (150 words)\n- Slide structure (15-20 slides)\n- Speaker notes for key slides\n- Demo points\n- Q&A preparation notes\n\nFormat as markdown with clear sections.`\n\n      case 'twitter':\n        return `${baseContext}\n\nWrite an engaging Twitter/X thread (5-7 tweets) announcing this project.\nMake it:\n- Technical but accessible\n- Include key features\n- Add relevant emojis\n- End with link and CTA\n- Each tweet under 280 chars\n\nFormat as numbered thread.`\n\n      case 'linkedin':\n        return `${baseContext}\n\nWrite a LinkedIn post for a technical leadership audience.\nInclude:\n- Professional hook\n- Business value\n- Technical highlights\n- Team/community angle\n- Call to action\n\nTone: Professional, insightful, 200-300 words.`\n\n      case 'hackathon':\n        return `${baseContext}\n\nDesign a hackathon challenge based on this project.\nInclude:\n- Challenge title and theme\n- Problem statement\n- Required deliverables\n- Judging criteria (4-5 points)\n- Starter resources\n- Sample tasks (3-5)\n- Difficulty level\n\nMake it engaging and achievable in 24-48 hours.`\n\n      default:\n        throw new Error(`Unknown format: ${format}`)\n    }\n  }\n}\n\n// Daytona Service\nexport class DaytonaService {\n  private apiUrl: string\n  private apiKey: string\n\n  constructor() {\n    this.apiUrl = process.env.DAYTONA_API_URL || 'https://api.daytona.io'\n    this.apiKey = process.env.DAYTONA_API_KEY || ''\n  }\n\n  async validateQuickstart(repoUrl: string, quickstartPath?: string): Promise<any> {\n    // Mock implementation - replace with actual Daytona API\n    if (!this.apiKey) {\n      return this.mockValidation()\n    }\n\n    try {\n      const response = await fetch(`${this.apiUrl}/workspaces`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          repository: repoUrl,\n          script: quickstartPath || 'npm install && npm test'\n        })\n      })\n      const ct = response.headers.get('content-type') || ''\n      if (!response.ok || !ct.includes('application/json')) {\n        throw new Error(`Daytona API bad response: ${response.status} ${ct}`)\n      }\n      return await response.json()\n    } catch (error) {\n      console.error('Daytona validation failed:', error)\n      return this.mockValidation()\n    }\n  }\n\n  private mockValidation() {\n    return {\n      passed: true,\n      runtime: 12.5,\n      output: 'Setup completed successfully âœ“\\nTests passed: 15/15',\n      retries: 0\n    }\n  }\n}\n\n// CodeRabbit Service\nexport class CodeRabbitService {\n  private apiUrl: string\n  private apiKey: string\n\n  constructor() {\n    this.apiUrl = process.env.CODERABBIT_API_URL || 'https://api.coderabbit.ai'\n    this.apiKey = process.env.CODERABBIT_API_KEY || ''\n  }\n\n  async reviewCodeSnippets(snippets: string[]): Promise<any[]> {\n    // Mock implementation - replace with actual CodeRabbit API\n    if (!this.apiKey) {\n      return snippets.map((_, idx) => this.mockReview(idx))\n    }\n\n    try {\n      const response = await fetch(`${this.apiUrl}/review`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ snippets })\n      })\n      const ct = response.headers.get('content-type') || ''\n      if (!response.ok || !ct.includes('application/json')) {\n        throw new Error(`CodeRabbit API bad response: ${response.status} ${ct}`)\n      }\n      return await response.json()\n    } catch (error) {\n      console.error('CodeRabbit review failed:', error)\n      return snippets.map((_, idx) => this.mockReview(idx))\n    }\n  }\n\n  private mockReview(index: number) {\n    return {\n      snippet_id: `snippet-${index}`,\n      quality_score: 92 + Math.floor(Math.random() * 8),\n      issues: [],\n      suggestions: ['Consider adding error handling', 'Add type annotations'],\n      reviewed_at: new Date().toISOString()\n    }\n  }\n}\n\n// Galileo Service\nexport class GalileoService {\n  private apiUrl: string\n  private apiKey: string\n\n  constructor() {\n    this.apiUrl = process.env.GALILEO_API_URL || 'https://api.galileo.ai'\n    this.apiKey = process.env.GALILEO_API_KEY || ''\n  }\n\n  async evaluateVariants(variants: ContentVariant[], profile: RepoProfile): Promise<ContentVariant[]> {\n    // Extended mock multi-metric evaluation. Replace with real API when available.\n    if (!this.apiKey) {\n      return variants.map(v => this.mockEvaluation(v))\n    }\n    try {\n      const response = await fetch(`${this.apiUrl}/evaluate-multi`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          variants: variants.map(v => v.content),\n          context: profile,\n          metrics: ['clarity','technicalAccuracy','audienceFit','actionability','originality','hallucinationRisk']\n        })\n      })\n      const ct = response.headers.get('content-type') || ''\n      if (!response.ok || !ct.includes('application/json')) {\n        throw new Error(`Galileo API bad response: ${response.status} ${ct}`)\n      }\n      const results = await response.json()\n      const safeArray = Array.isArray(results) ? results : []\n      return variants.map((v, idx) => {\n        const r = safeArray[idx]\n        if (!r || typeof r !== 'object') {\n          return this.mockEvaluation(v)\n        }\n        const evaluationMetrics = {\n          clarity: Number(r.clarity) || 0,\n          technicalAccuracy: Number(r.technicalAccuracy) || 0,\n          audienceFit: Number(r.audienceFit) || 0,\n          actionability: Number(r.actionability) || 0,\n          originality: Number(r.originality) || 0,\n          hallucinationRisk: Number(r.hallucinationRisk) || 0\n        }\n        // Composite score example weighting\n        const score = Math.round(\n          evaluationMetrics.clarity * 0.2 +\n          evaluationMetrics.technicalAccuracy * 0.25 +\n          evaluationMetrics.audienceFit * 0.15 +\n          evaluationMetrics.actionability * 0.15 +\n          evaluationMetrics.originality * 0.15 -\n          evaluationMetrics.hallucinationRisk * 100 * 0.15\n        )\n        return {\n          ...v,\n          score,\n          evaluationMetrics,\n          hallucination_risk: evaluationMetrics.hallucinationRisk,\n          coherence_score: evaluationMetrics.clarity\n        }\n      })\n    } catch (error) {\n      console.error('Galileo evaluation failed:', error)\n      return variants.map(v => this.mockEvaluation(v))\n    }\n  }\n\n  private mockEvaluation(variant: ContentVariant): ContentVariant {\n    const metrics = {\n      clarity: 80 + Math.random() * 15,\n      technicalAccuracy: 78 + Math.random() * 18,\n      audienceFit: 75 + Math.random() * 20,\n      actionability: 70 + Math.random() * 25,\n      originality: 72 + Math.random() * 22,\n      hallucinationRisk: Math.random() * 0.12\n    }\n    const score = Math.round(\n      metrics.clarity * 0.2 +\n      metrics.technicalAccuracy * 0.25 +\n      metrics.audienceFit * 0.15 +\n      metrics.actionability * 0.15 +\n      metrics.originality * 0.15 -\n      metrics.hallucinationRisk * 100 * 0.15\n    )\n    return {\n      ...variant,\n      score,\n      evaluationMetrics: metrics,\n      hallucination_risk: metrics.hallucinationRisk,\n      coherence_score: metrics.clarity\n    }\n  }\n}\n\n// ElevenLabs TTS Service\nexport class ElevenLabsTtsService {\n  private apiKey: string\n  private voiceId: string\n  private apiUrl: string\n\n  constructor() {\n    this.apiKey = process.env.ELEVENLABS_API_KEY || ''\n    this.voiceId = process.env.ELEVENLABS_VOICE_ID || '21m00Tcm4TlvDq8ikWAM' // default voice\n    this.apiUrl = process.env.ELEVENLABS_API_URL || 'https://api.elevenlabs.io/v1'\n  }\n\n  async synthesizeToBase64(text: string, format: 'mp3' | 'wav' = 'mp3'): Promise<{ base64: string, contentType: string }> {\n    if (!this.apiKey) {\n      throw new Error('ELEVENLABS_API_KEY not configured')\n    }\n    const url = `${this.apiUrl}/text-to-speech/${this.voiceId}`\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'xi-api-key': this.apiKey,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        text,\n        model_id: 'eleven_multilingual_v2',\n        voice_settings: { stability: 0.4, similarity_boost: 0.8 },\n        output_format: format === 'mp3' ? 'mp3_44100_128' : 'pcm_16000'\n      })\n    })\n    if (!response.ok) {\n      const ct = response.headers.get('content-type') || ''\n      const errText = ct.includes('application/json') ? JSON.stringify(await response.json()) : await response.text()\n      throw new Error(`ElevenLabs API error ${response.status}: ${errText}`)\n    }\n    const arrayBuf = await response.arrayBuffer()\n    const base64 = Buffer.from(arrayBuf).toString('base64')\n    const contentType = format === 'mp3' ? 'audio/mpeg' : 'audio/wav'\n    return { base64, contentType }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/devrel-agent-nyc/app/api/tts/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { ElevenLabsTtsService } from '@/lib/services'\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n    const { text, format } = body as { text: string, format?: 'mp3' | 'wav' }\n\n    if (!text || typeof text !== 'string') {\n      return NextResponse.json({ error: 'Missing text' }, { status: 400 })\n    }\n\n    const tts = new ElevenLabsTtsService()\n    const { base64, contentType } = await tts.synthesizeToBase64(text.slice(0, 5000), format || 'mp3')\n\n    return NextResponse.json({ audioBase64: base64, contentType }, { status: 200 })\n  } catch (err: any) {\n    return NextResponse.json({ error: err.message || 'TTS failed' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG;QAEzB,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU;YACrC,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,MAAM,IAAI,yIAAoB;QACpC,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM,IAAI,kBAAkB,CAAC,KAAK,KAAK,CAAC,GAAG,OAAO,UAAU;QAE5F,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,aAAa;YAAQ;QAAY,GAAG;YAAE,QAAQ;QAAI;IAC/E,EAAE,OAAO,KAAU;QACjB,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO,IAAI;QAAa,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF"}}]
}