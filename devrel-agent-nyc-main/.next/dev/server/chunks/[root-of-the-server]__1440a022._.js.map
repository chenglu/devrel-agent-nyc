{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/devrel-agent-nyc/lib/jobs.ts"],"sourcesContent":["// In-memory job storage (upgrade to Redis/DB later)\n\nimport type { GenerationJob, LogEntry } from './types'\n\nconst jobs = new Map<string, GenerationJob>()\n\nexport function createJob(repoUrl: string): GenerationJob {\n  const id = `job-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n  \n  const job: GenerationJob = {\n    id,\n    repoUrl,\n    status: 'pending',\n    progress: 0,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    logs: []\n  }\n\n  jobs.set(id, job)\n  return job\n}\n\nexport function getJob(id: string): GenerationJob | undefined {\n  return jobs.get(id)\n}\n\nexport function updateJob(id: string, updates: Partial<GenerationJob>): void {\n  const job = jobs.get(id)\n  if (job) {\n    Object.assign(job, updates, { updatedAt: new Date().toISOString() })\n    jobs.set(id, job)\n  }\n}\n\nexport function addLog(jobId: string, agent: string, message: string, color: string = 'text-foreground'): void {\n  const job = jobs.get(jobId)\n  if (job) {\n    const log: LogEntry = {\n      id: job.logs.length,\n      agent,\n      message,\n      color,\n      timestamp: new Date().toISOString()\n    }\n    job.logs.push(log)\n    job.updatedAt = new Date().toISOString()\n    jobs.set(jobId, job)\n  }\n}\n\nexport function getAllJobs(): GenerationJob[] {\n  return Array.from(jobs.values())\n}\n\n// Cleanup old jobs (optional, for memory management)\nexport function cleanupOldJobs(maxAge: number = 3600000): void {\n  const now = Date.now()\n  for (const [id, job] of jobs.entries()) {\n    const age = now - new Date(job.createdAt).getTime()\n    if (age > maxAge) {\n      jobs.delete(id)\n    }\n  }\n}\n"],"names":[],"mappings":"AAAA,oDAAoD;;;;;;;;;;;;;;;AAIpD,MAAM,OAAO,IAAI;AAEV,SAAS,UAAU,OAAe;IACvC,MAAM,KAAK,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;IAEzE,MAAM,MAAqB;QACzB;QACA;QACA,QAAQ;QACR,UAAU;QACV,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW,IAAI,OAAO,WAAW;QACjC,MAAM,EAAE;IACV;IAEA,KAAK,GAAG,CAAC,IAAI;IACb,OAAO;AACT;AAEO,SAAS,OAAO,EAAU;IAC/B,OAAO,KAAK,GAAG,CAAC;AAClB;AAEO,SAAS,UAAU,EAAU,EAAE,OAA+B;IACnE,MAAM,MAAM,KAAK,GAAG,CAAC;IACrB,IAAI,KAAK;QACP,OAAO,MAAM,CAAC,KAAK,SAAS;YAAE,WAAW,IAAI,OAAO,WAAW;QAAG;QAClE,KAAK,GAAG,CAAC,IAAI;IACf;AACF;AAEO,SAAS,OAAO,KAAa,EAAE,KAAa,EAAE,OAAe,EAAE,QAAgB,iBAAiB;IACrG,MAAM,MAAM,KAAK,GAAG,CAAC;IACrB,IAAI,KAAK;QACP,MAAM,MAAgB;YACpB,IAAI,IAAI,IAAI,CAAC,MAAM;YACnB;YACA;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;QACA,IAAI,IAAI,CAAC,IAAI,CAAC;QACd,IAAI,SAAS,GAAG,IAAI,OAAO,WAAW;QACtC,KAAK,GAAG,CAAC,OAAO;IAClB;AACF;AAEO,SAAS;IACd,OAAO,MAAM,IAAI,CAAC,KAAK,MAAM;AAC/B;AAGO,SAAS,eAAe,SAAiB,OAAO;IACrD,MAAM,MAAM,KAAK,GAAG;IACpB,KAAK,MAAM,CAAC,IAAI,IAAI,IAAI,KAAK,OAAO,GAAI;QACtC,MAAM,MAAM,MAAM,IAAI,KAAK,IAAI,SAAS,EAAE,OAAO;QACjD,IAAI,MAAM,QAAQ;YAChB,KAAK,MAAM,CAAC;QACd;IACF;AACF"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/devrel-agent-nyc/lib/github.ts"],"sourcesContent":["// GitHub repository analysis utilities\n\nexport async function fetchGitHubRepo(repoUrl: string) {\n  // Extract owner and repo name from URL\n  const match = repoUrl.match(/github\\.com\\/([^\\/]+)\\/([^\\/]+)/)\n  if (!match) {\n    throw new Error('Invalid GitHub URL')\n  }\n\n  const [, owner, repo] = match\n  const repoName = repo.replace(/\\.git$/, '')\n\n  const token = process.env.GITHUB_TOKEN\n  const headers: HeadersInit = {\n    'Accept': 'application/vnd.github.v3+json'\n  }\n  \n  if (token) {\n    headers['Authorization'] = `token ${token}`\n  }\n\n  // Fetch repository metadata\n  const repoResponse = await fetch(\n    `https://api.github.com/repos/${owner}/${repoName}`,\n    { headers }\n  )\n\n  if (!repoResponse.ok) {\n    throw new Error(`GitHub API error: ${repoResponse.statusText}`)\n  }\n\n  const repoData = await repoResponse.json()\n\n  // Fetch languages\n  const languagesResponse = await fetch(repoData.languages_url, { headers })\n  const languages = await languagesResponse.json()\n\n  // Fetch README\n  let readme = ''\n  try {\n    const readmeResponse = await fetch(\n      `https://api.github.com/repos/${owner}/${repoName}/readme`,\n      { headers: { ...headers, 'Accept': 'application/vnd.github.raw' } }\n    )\n    if (readmeResponse.ok) {\n      readme = await readmeResponse.text()\n    }\n  } catch (error) {\n    console.warn('README not found')\n  }\n\n  // Fetch repository tree to analyze structure\n  const treeResponse = await fetch(\n    `https://api.github.com/repos/${owner}/${repoName}/git/trees/${repoData.default_branch}?recursive=1`,\n    { headers }\n  )\n  \n  const treeData = await treeResponse.json()\n  const files = treeData.tree || []\n\n  const structure = analyzeRepoStructure(files)\n\n  return {\n    full_name: repoData.full_name,\n    owner,\n    name: repoName,\n    description: repoData.description || '',\n    languages,\n    primaryLanguage: repoData.language || 'Unknown',\n    stars: repoData.stargazers_count,\n    forks: repoData.forks_count,\n    readme,\n    structure,\n    url: repoUrl\n  }\n}\n\n// Helper: compute ISO since date for a given window\nexport function getSinceISO(range: '1week'|'1month'|'3months'|'6months'|'1year'): string {\n  const now = new Date()\n  const d = new Date(now)\n  switch (range) {\n    case '1week': d.setDate(now.getDate() - 7); break\n    case '1month': d.setMonth(now.getMonth() - 1); break\n    case '3months': d.setMonth(now.getMonth() - 3); break\n    case '6months': d.setMonth(now.getMonth() - 6); break\n    case '1year': d.setFullYear(now.getFullYear() - 1); break\n  }\n  return d.toISOString()\n}\n\n// Fetch recent commits (optionally in a date range)\nexport async function fetchRecentCommits(repoUrl: string, limit: number = 10, sinceISO?: string, untilISO?: string) {\n  const match = repoUrl.match(/github\\.com\\/([^\\/]+)\\/([^\\/]+)/)\n  if (!match) throw new Error('Invalid GitHub URL')\n  const [, owner, repo] = match\n  const repoName = repo.replace(/\\.git$/, '')\n\n  const token = process.env.GITHUB_TOKEN\n  const headers: HeadersInit = {\n    'Accept': 'application/vnd.github.v3+json'\n  }\n  if (token) headers['Authorization'] = `token ${token}`\n\n  try {\n    const params = new URLSearchParams()\n    params.set('per_page', String(limit))\n    if (sinceISO) params.set('since', sinceISO)\n    if (untilISO) params.set('until', untilISO)\n    const url = `https://api.github.com/repos/${owner}/${repoName}/commits?${params.toString()}`\n    const commitsResp = await fetch(url, { headers })\n    if (!commitsResp.ok) throw new Error('Commits fetch failed')\n    const commitsData = await commitsResp.json()\n    return commitsData.map((c: any) => ({\n      sha: c.sha,\n      message: (c.commit && c.commit.message) || '',\n      author: (c.commit && c.commit.author && c.commit.author.name) || (c.author && c.author.login) || 'unknown',\n      date: (c.commit && c.commit.author && c.commit.author.date) || '',\n      url: c.html_url\n    }))\n  } catch (e) {\n    console.warn('Recent commits unavailable:', (e as Error).message)\n    return []\n  }\n}\n\n// Fetch changed files for a single commit (limited)\nexport async function fetchCommitFiles(repoUrl: string, sha: string) {\n  const match = repoUrl.match(/github\\.com\\/([^\\/]+)\\/([^\\/]+)/)\n  if (!match) throw new Error('Invalid GitHub URL')\n  const [, owner, repo] = match\n  const repoName = repo.replace(/\\.git$/, '')\n\n  const token = process.env.GITHUB_TOKEN\n  const headers: HeadersInit = { 'Accept': 'application/vnd.github.v3+json' }\n  if (token) headers['Authorization'] = `token ${token}`\n\n  try {\n    const resp = await fetch(`https://api.github.com/repos/${owner}/${repoName}/commits/${sha}`, { headers })\n    if (!resp.ok) throw new Error('Commit detail fetch failed')\n    const data = await resp.json()\n    const files = Array.isArray(data.files) ? data.files : []\n    return files.map((f: any) => ({\n      filename: f.filename,\n      status: f.status,\n      additions: f.additions,\n      deletions: f.deletions,\n      changes: f.changes,\n      patch: f.patch\n    }))\n  } catch (e) {\n    console.warn(`Commit files unavailable for ${sha}:`, (e as Error).message)\n    return []\n  }\n}\n\nfunction analyzeRepoStructure(files: any[]) {\n  const paths = files.map((f: any) => f.path.toLowerCase())\n  \n  const hasReadme = paths.some(p => p === 'readme.md' || p === 'readme.txt')\n  const hasDocs = paths.some(p => p.startsWith('docs/') || p.startsWith('documentation/'))\n  const hasExamples = paths.some(p => p.startsWith('examples/') || p.startsWith('example/'))\n  \n  // Extract key directories (top-level only)\n  const directories = new Set<string>()\n  files.forEach((f: any) => {\n    if (f.type === 'tree') {\n      const parts = f.path.split('/')\n      if (parts.length === 1) {\n        directories.add(parts[0])\n      }\n    }\n  })\n\n  return {\n    hasReadme,\n    hasDocs,\n    hasExamples,\n    keyDirectories: Array.from(directories).sort()\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/devrel-agent-nyc/lib/services.ts"],"sourcesContent":["// Service adapters for external APIs\n\nimport Anthropic from '@anthropic-ai/sdk'\nimport type { RepoProfile, ContentVariant, ContentFormat } from './types'\n\n// Anthropic Claude Service\nexport class ClaudeService {\n  private client: Anthropic\n  \n  constructor() {\n    const apiKey = process.env.ANTHROPIC_API_KEY\n    if (!apiKey) {\n      throw new Error('ANTHROPIC_API_KEY not configured')\n    }\n    this.client = new Anthropic({ apiKey })\n  }\n\n  async extractRepoProfile(repoData: any): Promise<RepoProfile> {\n    const prompt = `Analyze this GitHub repository and extract a structured profile:\n\nRepository: ${repoData.full_name}\nDescription: ${repoData.description}\nLanguages: ${JSON.stringify(repoData.languages)}\nREADME: ${repoData.readme}\n\nExtract:\n1. Main features (3-5 key capabilities)\n2. Technical stack (frameworks, tools, dependencies)\n3. Primary use cases\n4. Key directories and their purposes\n5. Quickstart path if available\n\nReturn as JSON with this structure:\n{\n  \"mainFeatures\": string[],\n  \"technicalStack\": string[],\n  \"useCases\": string[],\n  \"keyDirectories\": string[],\n  \"quickstartPath\": string | null\n}`\n\n    try {\n      const response = await this.client.messages.create({\n        model: 'claude-sonnet-4-20250514',\n        max_tokens: 2048,\n        messages: [{\n          role: 'user',\n          content: prompt\n        }]\n      })\n\n      const content = response.content[0]\n      if (content.type !== 'text') {\n        throw new Error('Unexpected response format')\n      }\n\n      return JSON.parse(content.text)\n    } catch (error: any) {\n      console.error('Claude API error:', error.message)\n      // Fallback to basic extraction\n      return this.extractProfileFallback(repoData)\n    }\n  }\n\n  private extractProfileFallback(repoData: any): any {\n    // Simple extraction without AI when API fails\n    return {\n      mainFeatures: [\n        repoData.description || 'No description available',\n        'See README for details'\n      ],\n      technicalStack: Object.keys(repoData.languages || {}).slice(0, 5),\n      useCases: ['General development'],\n      keyDirectories: repoData.structure?.keyDirectories || [],\n      quickstartPath: null\n    }\n  }\n\n  async generateContentVariants(\n    profile: RepoProfile,\n    format: ContentFormat,\n    variantCount: number = 2\n  ): Promise<ContentVariant[]> {\n    const prompts = this.getPromptForFormat(format, profile)\n    const variants: ContentVariant[] = []\n\n    try {\n      for (let i = 0; i < variantCount; i++) {\n        const response = await this.client.messages.create({\n          model: 'claude-sonnet-4-20250514',\n          max_tokens: 4096,\n          temperature: 0.7 + (i * 0.1),\n          messages: [{\n            role: 'user',\n            content: prompts\n          }]\n        })\n\n        const content = response.content[0]\n        if (content.type === 'text') {\n          variants.push({\n            id: `${format}-variant-${i + 1}`,\n            format,\n            content: content.text\n          })\n        }\n      }\n    } catch (error: any) {\n      console.error('Claude generation error:', error.message)\n      // Return fallback content\n      variants.push({\n        id: `${format}-variant-1`,\n        format,\n        content: this.generateFallbackContent(format, profile)\n      })\n    }\n\n    return variants\n  }\n\n  private generateFallbackContent(format: ContentFormat, profile: RepoProfile): string {\n    const repoName = profile.name\n    const description = profile.description\n    \n    switch (format) {\n      case 'tutorial':\n        return `# Getting Started with ${repoName}\n\n## Overview\n${description}\n\n## Prerequisites\n- Git installed\n- Basic knowledge of ${profile.primaryLanguage}\n\n## Installation\n\\`\\`\\`bash\ngit clone ${profile.url}\ncd ${repoName}\n# Follow project-specific setup instructions\n\\`\\`\\`\n\n## Next Steps\nCheck the README for detailed documentation.\n\n*Note: This is a fallback tutorial. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'blog':\n        return `# Introducing ${repoName}\n\n${description}\n\n## Key Features\n${profile.mainFeatures.map(f => `- ${f}`).join('\\n')}\n\n## Tech Stack\nBuilt with ${profile.technicalStack.join(', ')}\n\n## Get Started\nVisit the repository: ${profile.url}\n\n*Note: This is a fallback blog post. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'talk':\n        return `# ${repoName}: Conference Talk Outline\n\n## Title\n\"Introduction to ${repoName}\"\n\n## Abstract\n${description}\n\n## Slides (30-45 minutes)\n1. Introduction & Background\n2. Problem Statement\n3. Solution Overview\n4. Key Features\n5. Live Demo\n6. Q&A\n\n*Note: This is a fallback talk outline. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'twitter':\n        return `üöÄ Check out ${repoName}!\n\n${description}\n\nBuilt with ${profile.primaryLanguage}\n‚≠ê ${profile.stars} stars\n\nLearn more: ${profile.url}\n\n#OpenSource #${profile.primaryLanguage}\n\n*Note: This is a fallback tweet. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'linkedin':\n        return `I'm excited to share ${repoName} with the community.\n\n${description}\n\nKey highlights:\n${profile.mainFeatures.map(f => `‚Ä¢ ${f}`).join('\\n')}\n\nCheck it out: ${profile.url}\n\n*Note: This is a fallback LinkedIn post. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      case 'hackathon':\n        return `# Hackathon Challenge: Build with ${repoName}\n\n## Challenge Description\nCreate an innovative project using ${repoName}\n\n## Requirements\n- Use ${profile.primaryLanguage}\n- Implement at least one key feature\n- Document your approach\n\n## Judging Criteria\n- Innovation\n- Technical implementation\n- Code quality\n- Presentation\n\n*Note: This is a fallback challenge. For AI-generated content, please add valid ANTHROPIC_API_KEY.*`\n\n      default:\n        return `Content for ${format} format.\\n\\n*Note: Add ANTHROPIC_API_KEY for AI-generated content.*`\n    }\n  }\n  private getPromptForFormat(format: ContentFormat, profile: RepoProfile): string {\n    const commitsList = Array.isArray((profile as any).commits) ? (profile as any).commits.slice(0, 5) : []\n    const recentCommits = commitsList.length\n      ? `\\nRecent Commits (most recent first):\\n${commitsList.map((c: any) => `- ${new Date(c.date).toISOString().slice(0,10)}: ${String(c.message || '').split('\\n')[0]}`).join('\\n')}`\n      : ''\n    const baseContext = `Repository: ${profile.name}\nDescription: ${profile.description}\nMain Features: ${profile.mainFeatures.join(', ')}\nTech Stack: ${profile.technicalStack.join(', ')}\nPrimary Language: ${profile.primaryLanguage}${recentCommits}\\nNote: Focus content on changes within the selected analysis period when relevant.`\n\n    switch (format) {\n      case 'tutorial':\n        return `${baseContext}\n\nCreate a step-by-step getting started tutorial for developers new to this project.\nInclude:\n- Prerequisites\n- Installation steps\n- First example with working code\n- Common troubleshooting tips\n- Next steps\n\nMake it executable and accurate. Use markdown format.`\n\n      case 'blog':\n        return `${baseContext}\n\nWrite a technical blog post announcing or explaining this project.\nInclude:\n- Hook: Why this project matters\n- Technical overview\n- Key features with code examples\n- Use cases\n- Getting started link\n- Call to action\n\nTarget audience: Technical developers. Use markdown format.`\n\n      case 'talk':\n        return `${baseContext}\n\nCreate a 30-45 minute conference talk outline about this project.\nInclude:\n- Talk title\n- Abstract (150 words)\n- Slide structure (15-20 slides)\n- Speaker notes for key slides\n- Demo points\n- Q&A preparation notes\n\nFormat as markdown with clear sections.`\n\n      case 'twitter':\n        return `${baseContext}\n\nWrite an engaging Twitter/X thread (5-7 tweets) announcing this project.\nMake it:\n- Technical but accessible\n- Include key features\n- Add relevant emojis\n- End with link and CTA\n- Each tweet under 280 chars\n\nFormat as numbered thread.`\n\n      case 'linkedin':\n        return `${baseContext}\n\nWrite a LinkedIn post for a technical leadership audience.\nInclude:\n- Professional hook\n- Business value\n- Technical highlights\n- Team/community angle\n- Call to action\n\nTone: Professional, insightful, 200-300 words.`\n\n      case 'hackathon':\n        return `${baseContext}\n\nDesign a hackathon challenge based on this project.\nInclude:\n- Challenge title and theme\n- Problem statement\n- Required deliverables\n- Judging criteria (4-5 points)\n- Starter resources\n- Sample tasks (3-5)\n- Difficulty level\n\nMake it engaging and achievable in 24-48 hours.`\n\n      default:\n        throw new Error(`Unknown format: ${format}`)\n    }\n  }\n}\n\n// Daytona Service\nexport class DaytonaService {\n  private apiUrl: string\n  private apiKey: string\n\n  constructor() {\n    this.apiUrl = process.env.DAYTONA_API_URL || 'https://api.daytona.io'\n    this.apiKey = process.env.DAYTONA_API_KEY || ''\n  }\n\n  async validateQuickstart(repoUrl: string, quickstartPath?: string): Promise<any> {\n    // Mock implementation - replace with actual Daytona API\n    if (!this.apiKey) {\n      return this.mockValidation()\n    }\n\n    try {\n      const response = await fetch(`${this.apiUrl}/workspaces`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          repository: repoUrl,\n          script: quickstartPath || 'npm install && npm test'\n        })\n      })\n      const ct = response.headers.get('content-type') || ''\n      if (!response.ok || !ct.includes('application/json')) {\n        throw new Error(`Daytona API bad response: ${response.status} ${ct}`)\n      }\n      return await response.json()\n    } catch (error) {\n      console.error('Daytona validation failed:', error)\n      return this.mockValidation()\n    }\n  }\n\n  private mockValidation() {\n    return {\n      passed: true,\n      runtime: 12.5,\n      output: 'Setup completed successfully ‚úì\\nTests passed: 15/15',\n      retries: 0\n    }\n  }\n}\n\n// CodeRabbit Service\nexport class CodeRabbitService {\n  private apiUrl: string\n  private apiKey: string\n\n  constructor() {\n    this.apiUrl = process.env.CODERABBIT_API_URL || 'https://api.coderabbit.ai'\n    this.apiKey = process.env.CODERABBIT_API_KEY || ''\n  }\n\n  async reviewCodeSnippets(snippets: string[]): Promise<any[]> {\n    // Mock implementation - replace with actual CodeRabbit API\n    if (!this.apiKey) {\n      return snippets.map((_, idx) => this.mockReview(idx))\n    }\n\n    try {\n      const response = await fetch(`${this.apiUrl}/review`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ snippets })\n      })\n      const ct = response.headers.get('content-type') || ''\n      if (!response.ok || !ct.includes('application/json')) {\n        throw new Error(`CodeRabbit API bad response: ${response.status} ${ct}`)\n      }\n      return await response.json()\n    } catch (error) {\n      console.error('CodeRabbit review failed:', error)\n      return snippets.map((_, idx) => this.mockReview(idx))\n    }\n  }\n\n  private mockReview(index: number) {\n    return {\n      snippet_id: `snippet-${index}`,\n      quality_score: 92 + Math.floor(Math.random() * 8),\n      issues: [],\n      suggestions: ['Consider adding error handling', 'Add type annotations'],\n      reviewed_at: new Date().toISOString()\n    }\n  }\n}\n\n// Galileo Service\nexport class GalileoService {\n  private apiUrl: string\n  private apiKey: string\n\n  constructor() {\n    this.apiUrl = process.env.GALILEO_API_URL || 'https://api.galileo.ai'\n    this.apiKey = process.env.GALILEO_API_KEY || ''\n  }\n\n  async evaluateVariants(variants: ContentVariant[], profile: RepoProfile): Promise<ContentVariant[]> {\n    // Extended mock multi-metric evaluation. Replace with real API when available.\n    if (!this.apiKey) {\n      return variants.map(v => this.mockEvaluation(v))\n    }\n    try {\n      const response = await fetch(`${this.apiUrl}/evaluate-multi`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          variants: variants.map(v => v.content),\n          context: profile,\n          metrics: ['clarity','technicalAccuracy','audienceFit','actionability','originality','hallucinationRisk']\n        })\n      })\n      const ct = response.headers.get('content-type') || ''\n      if (!response.ok || !ct.includes('application/json')) {\n        throw new Error(`Galileo API bad response: ${response.status} ${ct}`)\n      }\n      const results = await response.json()\n      const safeArray = Array.isArray(results) ? results : []\n      return variants.map((v, idx) => {\n        const r = safeArray[idx]\n        if (!r || typeof r !== 'object') {\n          return this.mockEvaluation(v)\n        }\n        const evaluationMetrics = {\n          clarity: Number(r.clarity) || 0,\n          technicalAccuracy: Number(r.technicalAccuracy) || 0,\n          audienceFit: Number(r.audienceFit) || 0,\n          actionability: Number(r.actionability) || 0,\n          originality: Number(r.originality) || 0,\n          hallucinationRisk: Number(r.hallucinationRisk) || 0\n        }\n        // Composite score example weighting\n        const score = Math.round(\n          evaluationMetrics.clarity * 0.2 +\n          evaluationMetrics.technicalAccuracy * 0.25 +\n          evaluationMetrics.audienceFit * 0.15 +\n          evaluationMetrics.actionability * 0.15 +\n          evaluationMetrics.originality * 0.15 -\n          evaluationMetrics.hallucinationRisk * 100 * 0.15\n        )\n        return {\n          ...v,\n          score,\n          evaluationMetrics,\n          hallucination_risk: evaluationMetrics.hallucinationRisk,\n          coherence_score: evaluationMetrics.clarity\n        }\n      })\n    } catch (error) {\n      console.error('Galileo evaluation failed:', error)\n      return variants.map(v => this.mockEvaluation(v))\n    }\n  }\n\n  private mockEvaluation(variant: ContentVariant): ContentVariant {\n    const metrics = {\n      clarity: 80 + Math.random() * 15,\n      technicalAccuracy: 78 + Math.random() * 18,\n      audienceFit: 75 + Math.random() * 20,\n      actionability: 70 + Math.random() * 25,\n      originality: 72 + Math.random() * 22,\n      hallucinationRisk: Math.random() * 0.12\n    }\n    const score = Math.round(\n      metrics.clarity * 0.2 +\n      metrics.technicalAccuracy * 0.25 +\n      metrics.audienceFit * 0.15 +\n      metrics.actionability * 0.15 +\n      metrics.originality * 0.15 -\n      metrics.hallucinationRisk * 100 * 0.15\n    )\n    return {\n      ...variant,\n      score,\n      evaluationMetrics: metrics,\n      hallucination_risk: metrics.hallucinationRisk,\n      coherence_score: metrics.clarity\n    }\n  }\n}\n\n// ElevenLabs TTS Service\nexport class ElevenLabsTtsService {\n  private apiKey: string\n  private voiceId: string\n  private apiUrl: string\n\n  constructor() {\n    this.apiKey = process.env.ELEVENLABS_API_KEY || ''\n    this.voiceId = process.env.ELEVENLABS_VOICE_ID || '21m00Tcm4TlvDq8ikWAM' // default voice\n    this.apiUrl = process.env.ELEVENLABS_API_URL || 'https://api.elevenlabs.io/v1'\n  }\n\n  async synthesizeToBase64(text: string, format: 'mp3' | 'wav' = 'mp3'): Promise<{ base64: string, contentType: string }> {\n    if (!this.apiKey) {\n      throw new Error('ELEVENLABS_API_KEY not configured')\n    }\n    const url = `${this.apiUrl}/text-to-speech/${this.voiceId}`\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'xi-api-key': this.apiKey,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        text,\n        model_id: 'eleven_multilingual_v2',\n        voice_settings: { stability: 0.4, similarity_boost: 0.8 },\n        output_format: format === 'mp3' ? 'mp3_44100_128' : 'pcm_16000'\n      })\n    })\n    if (!response.ok) {\n      const ct = response.headers.get('content-type') || ''\n      const errText = ct.includes('application/json') ? JSON.stringify(await response.json()) : await response.text()\n      throw new Error(`ElevenLabs API error ${response.status}: ${errText}`)\n    }\n    const arrayBuf = await response.arrayBuffer()\n    const base64 = Buffer.from(arrayBuf).toString('base64')\n    const contentType = format === 'mp3' ? 'audio/mpeg' : 'audio/wav'\n    return { base64, contentType }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/devrel-agent-nyc/app/api/generate/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createJob, updateJob, addLog } from '@/lib/jobs'\nimport { fetchGitHubRepo, fetchRecentCommits, getSinceISO, fetchCommitFiles } from '@/lib/github'\nimport { ClaudeService, DaytonaService, CodeRabbitService, GalileoService } from '@/lib/services'\nimport type { RepoProfile, ContentFormat, ContentVariant } from '@/lib/types'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { repoUrl, formats, timeRange } = body\n\n    if (!repoUrl) {\n      return NextResponse.json({ error: 'Repository URL is required' }, { status: 400 })\n    }\n\n    // Create job\n    const job = createJob(repoUrl)\n    if (timeRange) updateJob(job.id, { timeRange })\n    \n    // Start async processing (don't await)\n    processGeneration(job.id, repoUrl, formats || ['tutorial', 'blog', 'talk', 'twitter'], (timeRange as any) || '3months')\n      .catch(error => {\n        console.error('Generation failed:', error)\n        updateJob(job.id, {\n          status: 'failed',\n          error: error.message\n        })\n      })\n\n    return NextResponse.json({ jobId: job.id })\n  } catch (error: any) {\n    return NextResponse.json(\n      { error: error.message || 'Generation failed' },\n      { status: 500 }\n    )\n  }\n}\n\nasync function processGeneration(\n  jobId: string,\n  repoUrl: string,\n  formats: ContentFormat[],\n  timeRange: '1week' | '1month' | '3months' | '6months' | '1year'\n) {\n  // Phase 1: Analyzing repository\n  updateJob(jobId, { status: 'analyzing', progress: 10 })\n  addLog(jobId, 'System', 'Initializing DevRel Campaign Generator...', 'text-primary')\n  \n  addLog(jobId, 'Understanding Agent', 'Fetching repository metadata...', 'text-chart-3')\n  const repoData = await fetchGitHubRepo(repoUrl)\n  addLog(jobId, 'Understanding Agent', `Fetching recent commits for ${timeRange} window...`, 'text-chart-3')\n  const sinceISO = getSinceISO(timeRange)\n  const recentCommits = await fetchRecentCommits(repoUrl, 50, sinceISO)\n  if (recentCommits.length) {\n    addLog(jobId, 'Understanding Agent', `Loaded ${recentCommits.length} recent commits since ${sinceISO.slice(0,10)}`, 'text-chart-3')\n  } else {\n    addLog(jobId, 'Understanding Agent', 'No recent commits available or fetch failed', 'text-chart-5')\n  }\n  // Fetch diffs for first few commits to ground content and reviews\n  const commitLimitForDiffs = Math.min(recentCommits.length, 5)\n  let diffsFetched = 0\n  for (let i = 0; i < commitLimitForDiffs; i++) {\n    const files = await fetchCommitFiles(repoUrl, recentCommits[i].sha)\n    if (files && files.length) {\n      recentCommits[i].files = files\n      diffsFetched++\n    }\n  }\n  if (diffsFetched > 0) {\n    addLog(jobId, 'Understanding Agent', `Fetched file diffs for ${diffsFetched} commits`, 'text-chart-3')\n  }\n  \n  addLog(jobId, 'Understanding Agent', `Found ${Object.keys(repoData.languages).length} languages`, 'text-chart-3')\n  \n  // Phase 2: Extract profile with Claude\n  updateJob(jobId, { progress: 25 })\n  addLog(jobId, 'Claude', 'Analyzing repository structure...', 'text-primary')\n\n  let claude: ClaudeService\n  let extractedProfile: any\n  \n  try {\n    claude = new ClaudeService()\n    addLog(jobId, 'Claude', 'Extracting repository profile...', 'text-primary')\n    extractedProfile = await claude.extractRepoProfile(repoData)\n  } catch (error: any) {\n    // Check if it's an API key issue\n    if (error.message?.includes('ANTHROPIC_API_KEY')) {\n      addLog(jobId, 'System', '‚ö†Ô∏è ANTHROPIC_API_KEY not configured', 'text-chart-5')\n      addLog(jobId, 'System', 'Using fallback content generation...', 'text-chart-5')\n      claude = new ClaudeService()\n      extractedProfile = {\n        mainFeatures: ['Feature analysis unavailable - add API key'],\n        technicalStack: Object.keys(repoData.languages || {}),\n        quickstartPath: null\n      }\n    } else if (error.message?.includes('credit balance')) {\n      addLog(jobId, 'System', '‚ö†Ô∏è Anthropic API credits exhausted', 'text-chart-5')\n      addLog(jobId, 'System', 'Using fallback content generation...', 'text-chart-5')\n      claude = new ClaudeService()\n      extractedProfile = {\n        mainFeatures: [repoData.description || 'No description'],\n        technicalStack: Object.keys(repoData.languages || {}),\n        quickstartPath: null\n      }\n    } else {\n      throw error\n    }\n  }\n  \n  const profile: RepoProfile = {\n    url: repoData.url,\n    owner: repoData.owner,\n    name: repoData.name,\n    description: repoData.description,\n    languages: repoData.languages,\n    primaryLanguage: repoData.primaryLanguage,\n    stars: repoData.stars,\n    forks: repoData.forks,\n    structure: repoData.structure,\n    readme: repoData.readme.substring(0, 5000), // Truncate for storage\n    mainFeatures: extractedProfile.mainFeatures,\n    technicalStack: extractedProfile.technicalStack,\n    quickstartPath: extractedProfile.quickstartPath,\n    commits: recentCommits,\n    extractedAt: new Date().toISOString(),\n    version: '1.0'\n  }\n  \n  updateJob(jobId, { profile, progress: 35 })\n  addLog(jobId, 'Claude', `Identified ${profile.mainFeatures.length} key features`, 'text-primary')\n  \n  // Phase 3: Validate with Daytona\n  updateJob(jobId, { status: 'validating', progress: 40 })\n  addLog(jobId, 'Daytona', 'Creating ephemeral workspace...', 'text-accent')\n  \n  const daytona = new DaytonaService()\n  const executionReport = await daytona.validateQuickstart(repoUrl, profile.quickstartPath)\n  \n  updateJob(jobId, { executionReport, progress: 50 })\n  if (executionReport.passed) {\n    addLog(jobId, 'Daytona', 'Validation completed successfully ‚úì', 'text-accent')\n  } else {\n    addLog(jobId, 'Daytona', 'Validation completed with warnings', 'text-chart-5')\n  }\n  \n  // Phase 4: Generate content variants\n  updateJob(jobId, { status: 'generating', progress: 55 })\n  const hasApiKey = !!process.env.ANTHROPIC_API_KEY\n  if (!hasApiKey) {\n    addLog(jobId, 'Content Agent', 'Generating fallback content (no API key)...', 'text-chart-5')\n  } else {\n    addLog(jobId, 'Content Agent', 'Generating AI-powered content variants...', 'text-chart-4')\n  }\n  \n  const allVariants: ContentVariant[] = []\n  const progressPerFormat = 25 / formats.length\n  \n  for (let i = 0; i < formats.length; i++) {\n    const format = formats[i]\n    addLog(jobId, 'Content Agent', `Creating ${format} variants...`, 'text-chart-4')\n    \n    const variants = await claude.generateContentVariants(profile, format, 2)\n    allVariants.push(...variants)\n    \n    updateJob(jobId, { \n      variants: allVariants,\n      progress: 55 + (i + 1) * progressPerFormat \n    })\n  }\n  \n  // Phase 5: Evaluate with Galileo\n  updateJob(jobId, { status: 'evaluating', progress: 80 })\n  addLog(jobId, 'Galileo', 'Evaluating content quality...', 'text-chart-5')\n  \n  const galileo = new GalileoService()\n  const scoredVariants = await galileo.evaluateVariants(allVariants, profile)\n  \n  updateJob(jobId, { variants: scoredVariants, progress: 85 })\n  addLog(jobId, 'Galileo', `Scored ${scoredVariants.length} variants (multi-metric)`, 'text-chart-5')\n\n  // Single improvement iteration for low-performing variants\n  const IMPROVEMENT_THRESHOLD = 70\n  const HIGH_RISK_THRESHOLD = 0.1\n  const toImprove = scoredVariants.filter(v => (v.score || 0) < IMPROVEMENT_THRESHOLD || (v.evaluationMetrics?.hallucinationRisk || 0) > HIGH_RISK_THRESHOLD)\n  if (toImprove.length) {\n    addLog(jobId, 'Content Agent', `Improving ${toImprove.length} low-performing variants...`, 'text-chart-4')\n    const improved: ContentVariant[] = toImprove.map(v => ({\n      ...v,\n      content: `<!-- Improved iteration -->\\n${v.content}\\n\\n**Improvements Applied:** Clarified ambiguous steps; mitigated hallucination risk.`,\n      iteration: (v.iteration || 1) + 1\n    }))\n    const galileoRe = new GalileoService()\n    const rescored = await galileoRe.evaluateVariants(improved, profile)\n    const merged = scoredVariants.map(v => {\n      const found = rescored.find(r => r.id === v.id)\n      return found ? found : v\n    })\n    updateJob(jobId, { variants: merged, improvementIterations: 1 })\n    addLog(jobId, 'Galileo', 'Applied improvement iteration and rescored variants', 'text-chart-5')\n  }\n  \n  // Select best variant per format\n  const selectedVariants: Record<string, ContentVariant> = {}\n  formats.forEach(format => {\n    const formatVariants = scoredVariants.filter(v => v.format === format)\n    if (formatVariants.length > 0) {\n      const best = formatVariants.reduce((a, b) => \n        (a.score || 0) > (b.score || 0) ? a : b\n      )\n      selectedVariants[format] = best\n    }\n  })\n  \n  addLog(jobId, 'Galileo', 'Selected best variants per format', 'text-chart-5')\n  \n  // Phase 6: Code review (if applicable)\n  updateJob(jobId, { progress: 90 })\n  addLog(jobId, 'CodeRabbit', 'Reviewing code snippets...', 'text-accent')\n  \n  const codeRabbit = new CodeRabbitService()\n  const codeSnippets = extractCodeSnippets(scoredVariants)\n  const diffSnippets = extractCodeFromDiffs(profile)\n  const combinedSnippets = [...codeSnippets, ...diffSnippets].slice(0, 20)\n  const codeReviews = await codeRabbit.reviewCodeSnippets(combinedSnippets)\n  updateJob(jobId, { codeReviews, progress: 95 })\n  const avgQuality = codeReviews.reduce((sum, r) => sum + r.quality_score, 0) / (codeReviews.length || 1)\n  addLog(jobId, 'CodeRabbit', `Reviewed ${combinedSnippets.length} code snippets (avg quality ${avgQuality.toFixed(1)})`, 'text-accent')\n\n  // Targeted improvements based on CodeRabbit suggestions\n  const suggestions = codeReviews.flatMap((r: any) => r.suggestions || []) as string[]\n  if (suggestions.length) {\n    addLog(jobId, 'Content Agent', `Applying targeted improvements from diffs & review...`, 'text-chart-4')\n    const improvedVariants: ContentVariant[] = scoredVariants.map(v => ({\n      ...v,\n      content: `${v.content}\\n\\n---\\n**Code Quality Improvements (from recent diffs & review):**\\n${suggestions.slice(0, 10).map(s => `- ${s}`).join('\\n')}`,\n      iteration: (v.iteration || 1) + 1\n    }))\n    const rescoredImproved = await new GalileoService().evaluateVariants(improvedVariants, profile)\n    const reselected: Record<string, ContentVariant> = {}\n    formats.forEach(format => {\n      const fvs = rescoredImproved.filter(v => v.format === format)\n      if (fvs.length) {\n        const best = fvs.reduce((a, b) => (a.score || 0) > (b.score || 0) ? a : b)\n        reselected[format] = best\n      }\n    })\n    updateJob(jobId, { variants: rescoredImproved, selectedVariants: reselected })\n    addLog(jobId, 'Galileo', 'Rescored variants after targeted improvements', 'text-chart-5')\n  }\n  \n  // Complete\n  updateJob(jobId, { \n    status: 'completed',\n    progress: 100,\n    selectedVariants \n  })\n  addLog(jobId, 'System', 'Campaign generation complete! ‚ú®', 'text-primary text-glow-purple')\n}\n\nfunction extractCodeSnippets(variants: ContentVariant[]): string[] {\n  const snippets: string[] = []\n  \n  variants.forEach(variant => {\n    const codeBlocks = variant.content.match(/```[\\s\\S]*?```/g) || []\n    snippets.push(...codeBlocks)\n  })\n  // Also attempt to extract added lines from diff patches present in profile.commits (if any)\n  // Note: In this scope we don't have the profile. For a deeper integration, we'd thread diffs here.\n  \n  return snippets.slice(0, 10) // Limit to 10 snippets\n}\n\nfunction extractCodeFromDiffs(profile: RepoProfile): string[] {\n  const out: string[] = []\n  const commits: any[] = (profile as any).commits || []\n  for (const c of commits) {\n    const files = c.files || []\n    for (const f of files) {\n      if (!f.patch) continue\n      const lines = String(f.patch).split('\\n')\n      const added = lines.filter((ln: string) => ln.startsWith('+') && !ln.startsWith('+++')).slice(0, 100)\n      if (added.length) {\n        const snippet = '```diff\\n' + added.join('\\n') + '\\n```'\n        out.push(snippet)\n      }\n      if (out.length >= 10) break\n    }\n    if (out.length >= 10) break\n  }\n  return out\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG;QAExC,IAAI,CAAC,SAAS;YACZ,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,aAAa;QACb,MAAM,MAAM,IAAA,0HAAS,EAAC;QACtB,IAAI,WAAW,IAAA,0HAAS,EAAC,IAAI,EAAE,EAAE;YAAE;QAAU;QAE7C,uCAAuC;QACvC,kBAAkB,IAAI,EAAE,EAAE,SAAS,WAAW;YAAC;YAAY;YAAQ;YAAQ;SAAU,EAAE,AAAC,aAAqB,WAC1G,KAAK,CAAC,CAAA;YACL,QAAQ,KAAK,CAAC,sBAAsB;YACpC,IAAA,0HAAS,EAAC,IAAI,EAAE,EAAE;gBAChB,QAAQ;gBACR,OAAO,MAAM,OAAO;YACtB;QACF;QAEF,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,EAAE;QAAC;IAC3C,EAAE,OAAO,OAAY;QACnB,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAoB,GAC9C;YAAE,QAAQ;QAAI;IAElB;AACF;AAEA,eAAe,kBACb,KAAa,EACb,OAAe,EACf,OAAwB,EACxB,SAA+D;IAE/D,gCAAgC;IAChC,IAAA,0HAAS,EAAC,OAAO;QAAE,QAAQ;QAAa,UAAU;IAAG;IACrD,IAAA,uHAAM,EAAC,OAAO,UAAU,6CAA6C;IAErE,IAAA,uHAAM,EAAC,OAAO,uBAAuB,mCAAmC;IACxE,MAAM,WAAW,MAAM,IAAA,kIAAe,EAAC;IACvC,IAAA,uHAAM,EAAC,OAAO,uBAAuB,CAAC,4BAA4B,EAAE,UAAU,UAAU,CAAC,EAAE;IAC3F,MAAM,WAAW,IAAA,8HAAW,EAAC;IAC7B,MAAM,gBAAgB,MAAM,IAAA,qIAAkB,EAAC,SAAS,IAAI;IAC5D,IAAI,cAAc,MAAM,EAAE;QACxB,IAAA,uHAAM,EAAC,OAAO,uBAAuB,CAAC,OAAO,EAAE,cAAc,MAAM,CAAC,sBAAsB,EAAE,SAAS,KAAK,CAAC,GAAE,KAAK,EAAE;IACtH,OAAO;QACL,IAAA,uHAAM,EAAC,OAAO,uBAAuB,+CAA+C;IACtF;IACA,kEAAkE;IAClE,MAAM,sBAAsB,KAAK,GAAG,CAAC,cAAc,MAAM,EAAE;IAC3D,IAAI,eAAe;IACnB,IAAK,IAAI,IAAI,GAAG,IAAI,qBAAqB,IAAK;QAC5C,MAAM,QAAQ,MAAM,IAAA,mIAAgB,EAAC,SAAS,aAAa,CAAC,EAAE,CAAC,GAAG;QAClE,IAAI,SAAS,MAAM,MAAM,EAAE;YACzB,aAAa,CAAC,EAAE,CAAC,KAAK,GAAG;YACzB;QACF;IACF;IACA,IAAI,eAAe,GAAG;QACpB,IAAA,uHAAM,EAAC,OAAO,uBAAuB,CAAC,uBAAuB,EAAE,aAAa,QAAQ,CAAC,EAAE;IACzF;IAEA,IAAA,uHAAM,EAAC,OAAO,uBAAuB,CAAC,MAAM,EAAE,OAAO,IAAI,CAAC,SAAS,SAAS,EAAE,MAAM,CAAC,UAAU,CAAC,EAAE;IAElG,uCAAuC;IACvC,IAAA,0HAAS,EAAC,OAAO;QAAE,UAAU;IAAG;IAChC,IAAA,uHAAM,EAAC,OAAO,UAAU,qCAAqC;IAE7D,IAAI;IACJ,IAAI;IAEJ,IAAI;QACF,SAAS,IAAI,kIAAa;QAC1B,IAAA,uHAAM,EAAC,OAAO,UAAU,oCAAoC;QAC5D,mBAAmB,MAAM,OAAO,kBAAkB,CAAC;IACrD,EAAE,OAAO,OAAY;QACnB,iCAAiC;QACjC,IAAI,MAAM,OAAO,EAAE,SAAS,sBAAsB;YAChD,IAAA,uHAAM,EAAC,OAAO,UAAU,uCAAuC;YAC/D,IAAA,uHAAM,EAAC,OAAO,UAAU,wCAAwC;YAChE,SAAS,IAAI,kIAAa;YAC1B,mBAAmB;gBACjB,cAAc;oBAAC;iBAA6C;gBAC5D,gBAAgB,OAAO,IAAI,CAAC,SAAS,SAAS,IAAI,CAAC;gBACnD,gBAAgB;YAClB;QACF,OAAO,IAAI,MAAM,OAAO,EAAE,SAAS,mBAAmB;YACpD,IAAA,uHAAM,EAAC,OAAO,UAAU,sCAAsC;YAC9D,IAAA,uHAAM,EAAC,OAAO,UAAU,wCAAwC;YAChE,SAAS,IAAI,kIAAa;YAC1B,mBAAmB;gBACjB,cAAc;oBAAC,SAAS,WAAW,IAAI;iBAAiB;gBACxD,gBAAgB,OAAO,IAAI,CAAC,SAAS,SAAS,IAAI,CAAC;gBACnD,gBAAgB;YAClB;QACF,OAAO;YACL,MAAM;QACR;IACF;IAEA,MAAM,UAAuB;QAC3B,KAAK,SAAS,GAAG;QACjB,OAAO,SAAS,KAAK;QACrB,MAAM,SAAS,IAAI;QACnB,aAAa,SAAS,WAAW;QACjC,WAAW,SAAS,SAAS;QAC7B,iBAAiB,SAAS,eAAe;QACzC,OAAO,SAAS,KAAK;QACrB,OAAO,SAAS,KAAK;QACrB,WAAW,SAAS,SAAS;QAC7B,QAAQ,SAAS,MAAM,CAAC,SAAS,CAAC,GAAG;QACrC,cAAc,iBAAiB,YAAY;QAC3C,gBAAgB,iBAAiB,cAAc;QAC/C,gBAAgB,iBAAiB,cAAc;QAC/C,SAAS;QACT,aAAa,IAAI,OAAO,WAAW;QACnC,SAAS;IACX;IAEA,IAAA,0HAAS,EAAC,OAAO;QAAE;QAAS,UAAU;IAAG;IACzC,IAAA,uHAAM,EAAC,OAAO,UAAU,CAAC,WAAW,EAAE,QAAQ,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE;IAElF,iCAAiC;IACjC,IAAA,0HAAS,EAAC,OAAO;QAAE,QAAQ;QAAc,UAAU;IAAG;IACtD,IAAA,uHAAM,EAAC,OAAO,WAAW,mCAAmC;IAE5D,MAAM,UAAU,IAAI,mIAAc;IAClC,MAAM,kBAAkB,MAAM,QAAQ,kBAAkB,CAAC,SAAS,QAAQ,cAAc;IAExF,IAAA,0HAAS,EAAC,OAAO;QAAE;QAAiB,UAAU;IAAG;IACjD,IAAI,gBAAgB,MAAM,EAAE;QAC1B,IAAA,uHAAM,EAAC,OAAO,WAAW,uCAAuC;IAClE,OAAO;QACL,IAAA,uHAAM,EAAC,OAAO,WAAW,sCAAsC;IACjE;IAEA,qCAAqC;IACrC,IAAA,0HAAS,EAAC,OAAO;QAAE,QAAQ;QAAc,UAAU;IAAG;IACtD,MAAM,YAAY,CAAC,CAAC,QAAQ,GAAG,CAAC,iBAAiB;IACjD,IAAI,CAAC,WAAW;QACd,IAAA,uHAAM,EAAC,OAAO,iBAAiB,+CAA+C;IAChF,OAAO;QACL,IAAA,uHAAM,EAAC,OAAO,iBAAiB,6CAA6C;IAC9E;IAEA,MAAM,cAAgC,EAAE;IACxC,MAAM,oBAAoB,KAAK,QAAQ,MAAM;IAE7C,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;QACvC,MAAM,SAAS,OAAO,CAAC,EAAE;QACzB,IAAA,uHAAM,EAAC,OAAO,iBAAiB,CAAC,SAAS,EAAE,OAAO,YAAY,CAAC,EAAE;QAEjE,MAAM,WAAW,MAAM,OAAO,uBAAuB,CAAC,SAAS,QAAQ;QACvE,YAAY,IAAI,IAAI;QAEpB,IAAA,0HAAS,EAAC,OAAO;YACf,UAAU;YACV,UAAU,KAAK,CAAC,IAAI,CAAC,IAAI;QAC3B;IACF;IAEA,iCAAiC;IACjC,IAAA,0HAAS,EAAC,OAAO;QAAE,QAAQ;QAAc,UAAU;IAAG;IACtD,IAAA,uHAAM,EAAC,OAAO,WAAW,iCAAiC;IAE1D,MAAM,UAAU,IAAI,mIAAc;IAClC,MAAM,iBAAiB,MAAM,QAAQ,gBAAgB,CAAC,aAAa;IAEnE,IAAA,0HAAS,EAAC,OAAO;QAAE,UAAU;QAAgB,UAAU;IAAG;IAC1D,IAAA,uHAAM,EAAC,OAAO,WAAW,CAAC,OAAO,EAAE,eAAe,MAAM,CAAC,wBAAwB,CAAC,EAAE;IAEpF,2DAA2D;IAC3D,MAAM,wBAAwB;IAC9B,MAAM,sBAAsB;IAC5B,MAAM,YAAY,eAAe,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,yBAAyB,CAAC,EAAE,iBAAiB,EAAE,qBAAqB,CAAC,IAAI;IACvI,IAAI,UAAU,MAAM,EAAE;QACpB,IAAA,uHAAM,EAAC,OAAO,iBAAiB,CAAC,UAAU,EAAE,UAAU,MAAM,CAAC,2BAA2B,CAAC,EAAE;QAC3F,MAAM,WAA6B,UAAU,GAAG,CAAC,CAAA,IAAK,CAAC;gBACrD,GAAG,CAAC;gBACJ,SAAS,CAAC,6BAA6B,EAAE,EAAE,OAAO,CAAC,sFAAsF,CAAC;gBAC1I,WAAW,CAAC,EAAE,SAAS,IAAI,CAAC,IAAI;YAClC,CAAC;QACD,MAAM,YAAY,IAAI,mIAAc;QACpC,MAAM,WAAW,MAAM,UAAU,gBAAgB,CAAC,UAAU;QAC5D,MAAM,SAAS,eAAe,GAAG,CAAC,CAAA;YAChC,MAAM,QAAQ,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,EAAE,EAAE;YAC9C,OAAO,QAAQ,QAAQ;QACzB;QACA,IAAA,0HAAS,EAAC,OAAO;YAAE,UAAU;YAAQ,uBAAuB;QAAE;QAC9D,IAAA,uHAAM,EAAC,OAAO,WAAW,uDAAuD;IAClF;IAEA,iCAAiC;IACjC,MAAM,mBAAmD,CAAC;IAC1D,QAAQ,OAAO,CAAC,CAAA;QACd,MAAM,iBAAiB,eAAe,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;QAC/D,IAAI,eAAe,MAAM,GAAG,GAAG;YAC7B,MAAM,OAAO,eAAe,MAAM,CAAC,CAAC,GAAG,IACrC,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,IAAI;YAExC,gBAAgB,CAAC,OAAO,GAAG;QAC7B;IACF;IAEA,IAAA,uHAAM,EAAC,OAAO,WAAW,qCAAqC;IAE9D,uCAAuC;IACvC,IAAA,0HAAS,EAAC,OAAO;QAAE,UAAU;IAAG;IAChC,IAAA,uHAAM,EAAC,OAAO,cAAc,8BAA8B;IAE1D,MAAM,aAAa,IAAI,sIAAiB;IACxC,MAAM,eAAe,oBAAoB;IACzC,MAAM,eAAe,qBAAqB;IAC1C,MAAM,mBAAmB;WAAI;WAAiB;KAAa,CAAC,KAAK,CAAC,GAAG;IACrE,MAAM,cAAc,MAAM,WAAW,kBAAkB,CAAC;IACxD,IAAA,0HAAS,EAAC,OAAO;QAAE;QAAa,UAAU;IAAG;IAC7C,MAAM,aAAa,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,aAAa,EAAE,KAAK,CAAC,YAAY,MAAM,IAAI,CAAC;IACtG,IAAA,uHAAM,EAAC,OAAO,cAAc,CAAC,SAAS,EAAE,iBAAiB,MAAM,CAAC,4BAA4B,EAAE,WAAW,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE;IAExH,wDAAwD;IACxD,MAAM,cAAc,YAAY,OAAO,CAAC,CAAC,IAAW,EAAE,WAAW,IAAI,EAAE;IACvE,IAAI,YAAY,MAAM,EAAE;QACtB,IAAA,uHAAM,EAAC,OAAO,iBAAiB,CAAC,qDAAqD,CAAC,EAAE;QACxF,MAAM,mBAAqC,eAAe,GAAG,CAAC,CAAA,IAAK,CAAC;gBAClE,GAAG,CAAC;gBACJ,SAAS,GAAG,EAAE,OAAO,CAAC,sEAAsE,EAAE,YAAY,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAA,IAAK,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,OAAO;gBACtJ,WAAW,CAAC,EAAE,SAAS,IAAI,CAAC,IAAI;YAClC,CAAC;QACD,MAAM,mBAAmB,MAAM,IAAI,mIAAc,GAAG,gBAAgB,CAAC,kBAAkB;QACvF,MAAM,aAA6C,CAAC;QACpD,QAAQ,OAAO,CAAC,CAAA;YACd,MAAM,MAAM,iBAAiB,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;YACtD,IAAI,IAAI,MAAM,EAAE;gBACd,MAAM,OAAO,IAAI,MAAM,CAAC,CAAC,GAAG,IAAM,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,IAAI;gBACxE,UAAU,CAAC,OAAO,GAAG;YACvB;QACF;QACA,IAAA,0HAAS,EAAC,OAAO;YAAE,UAAU;YAAkB,kBAAkB;QAAW;QAC5E,IAAA,uHAAM,EAAC,OAAO,WAAW,iDAAiD;IAC5E;IAEA,WAAW;IACX,IAAA,0HAAS,EAAC,OAAO;QACf,QAAQ;QACR,UAAU;QACV;IACF;IACA,IAAA,uHAAM,EAAC,OAAO,UAAU,mCAAmC;AAC7D;AAEA,SAAS,oBAAoB,QAA0B;IACrD,MAAM,WAAqB,EAAE;IAE7B,SAAS,OAAO,CAAC,CAAA;QACf,MAAM,aAAa,QAAQ,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE;QACjE,SAAS,IAAI,IAAI;IACnB;IACA,4FAA4F;IAC5F,mGAAmG;IAEnG,OAAO,SAAS,KAAK,CAAC,GAAG,IAAI,uBAAuB;;AACtD;AAEA,SAAS,qBAAqB,OAAoB;IAChD,MAAM,MAAgB,EAAE;IACxB,MAAM,UAAiB,AAAC,QAAgB,OAAO,IAAI,EAAE;IACrD,KAAK,MAAM,KAAK,QAAS;QACvB,MAAM,QAAQ,EAAE,KAAK,IAAI,EAAE;QAC3B,KAAK,MAAM,KAAK,MAAO;YACrB,IAAI,CAAC,EAAE,KAAK,EAAE;YACd,MAAM,QAAQ,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC;YACpC,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,KAAe,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC,QAAQ,KAAK,CAAC,GAAG;YACjG,IAAI,MAAM,MAAM,EAAE;gBAChB,MAAM,UAAU,cAAc,MAAM,IAAI,CAAC,QAAQ;gBACjD,IAAI,IAAI,CAAC;YACX;YACA,IAAI,IAAI,MAAM,IAAI,IAAI;QACxB;QACA,IAAI,IAAI,MAAM,IAAI,IAAI;IACxB;IACA,OAAO;AACT"}}]
}